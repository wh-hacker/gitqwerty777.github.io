<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>clean code(無瑕的程式碼)心得 | QWERTY</title>
  <meta name="author" content="HCL">
  
  <meta name="description" content="作者從OO的觀點出發。僅節錄我認為有助益的">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="clean code(無瑕的程式碼)心得"/>
  <meta property="og:site_name" content="QWERTY"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51310670-1', 'auto');
  ga('send', 'pageview');
</script>




  <script src="https://leancloud.cn/scripts/lib/av-0.4.6.min.js"></script>
  <script>AV.initialize("j1wjgh5yjwypwyod6e73zq5pjr9bqgsjhlsnfi6fph67olbx", "lscxm6j2o23yn0vytcywijf1xzy0pwj826eey87aw6ndq9rf");</script>

</head>



 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">QWERTY</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> clean code(無瑕的程式碼)心得</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

	
		 <div class="alert alert-success description">
			<i class="fa fa-info-circle"></i> <p>作者從OO的觀點出發。僅節錄我認為有助益的</p>
			
		</div> <!-- alert -->
			

	<!-- content -->
	<div class="mypage">		
	    <p>作者是從OO的觀點出發。僅節錄我認為有助益的。<del>(書中廢話蠻多的)</del><br><a id="more"></a></p>
<h2 id="Chap01_動機">Chap01 動機</h2><ol>
<li>神就藏在細節裡<br>一致性的縮排是程式低錯誤率的最顯著指標  </li>
<li><blockquote><p>Later equals never</p>
<footer><strong>-- Dave LeBlanc</strong></footer></blockquote>      
累積愈多難看的程式碼 → 愈難清理 → (修改的成本太高)重寫   </li>
<li>不夠好的程式碼使維護成本太高(你看得懂自己寫的code嗎)</li>
</ol>
<p>讓開發速度變快的唯一方法：隨時保持clean code</p>
<h2 id="Chap02_Clean_Code_的定義">Chap02 Clean Code 的定義</h2><p>認為自己的code<strong>應該要有的樣子</strong></p>
<p>CleanCode學派(作者)對此的定義   </p>
<ul>
<li>每個函式、類別、模組都能表達單一意圖，降低程式相依性</li>
<li>易讀：不該使人猜測程式的意思<ul>
<li>每個看到的程式，執行結果都與你想得差不多</li>
<li>寫新的程式碼前，要先花時間了解舊程式碼</li>
</ul>
</li>
<li>抽象化：程式碼不重複</li>
</ul>
<h2 id="Chap03_原則">Chap03 原則</h2><p>任何原則在特殊情形都是可以違反的</p>
<ul>
<li>童子軍規則：離開的code比剛來時更乾淨</li>
<li>寫軟體如同寫作，先把想法寫下來，然後開始啄磨，直到讀起來很通順。第一份初稿通常是粗糙而雜亂無章的，修改之後才會改善到想要的樣子。程式設計大師在寫程式時，並不認為自己是在寫程式，而是在說故事。</li>
<li>一次只能專注在 「讓程式運作」或「讓程式整潔」其中之一</li>
</ul>
<h3 id="(1)有意義的命名">(1)有意義的命名</h3><ul>
<li>有辦法唸出來的名稱，愈具體愈好</li>
<li>用 define, enum, const 代替 常數<ul>
<li>enum player{black, white}</li>
</ul>
</li>
<li>class：名詞或名詞片語<ul>
<li>board → gameBoard</li>
<li>address → portAddress, EmailAddress</li>
<li>d → elapsedTimeInDays</li>
</ul>
</li>
<li>method：動詞或動詞片語<ul>
<li>flag → isFlagged()</li>
<li>Complex c = Complex(23.0) → Complex c = Complex.FromRealNumber(23.0)</li>
<li><a href="http://www.javaworld.com.tw/jute/post/view?bid=44&amp;id=24830&amp;sty=1&amp;tpg=1&amp;age=-1" target="_blank" rel="external">靜態工廠</a></li>
</ul>
</li>
<li>對特定功能使用一致的用詞<ul>
<li>fetch, retreive, get …</li>
</ul>
</li>
<li>避免 data, info, manager 等意義較廣的字<ul>
<li>accountList → accountGroup (除非此變數真的是list型態)</li>
<li>add() → insert(), append()</li>
</ul>
</li>
<li>使用專有名詞<ul>
<li>jobqueue</li>
<li>timestamp</li>
</ul>
</li>
</ul>
<h3 id="(2)函式">(2)函式</h3><ul>
<li>只做(在<strong>同一層級</strong>上)的<strong>一件</strong>事情<ul>
<li>以’無法再分割’為標準</li>
</ul>
</li>
<li>長度：小於二十行(或一個螢幕)</li>
<li>不用switch：switch容易違反<ul>
<li><a href="http://www.dotblogs.com.tw/hatelove/archive/2010/10/16/single-responsibility-principle.aspx" target="_blank" rel="external">單一職責原則</a></li>
<li><a href="http://www.cnblogs.com/adam/archive/2008/04/18/1159280.html" target="_blank" rel="external">開放閉合原則</a></li>
<li>解法：<a href="http://blog.monkeypotion.net/gameprog/pattern/abstract-factory" target="_blank" rel="external">抽象工廠</a></li>
<li>將switch移到interface method</li>
</ul>
</li>
<li>參數<ul>
<li>愈少愈好($\leq$ 三個，因為需要記順序)</li>
<li>避免用參數當回傳值<ul>
<li>呼叫擁有變數的類別，用其method來修改</li>
</ul>
</li>
<li>正常：單一參數<ul>
<li>用途一：取得參數的性質<ul>
<li>fileExists(“MyFile”)</li>
</ul>
</li>
<li>用途二：使用參數，然後回傳<ul>
<li>fileOpen(“MyFile”)</li>
</ul>
</li>
</ul>
</li>
<li>避免flag<ul>
<li>代表函式不只做一件事</li>
<li>render(bool isSuite) → renderForSuite() + renderForSingleTest()</li>
</ul>
</li>
</ul>
</li>
<li>命名<ul>
<li>以「不用重複查看函式定義」為原則<ul>
<li>write(name) → writeField(name)</li>
<li>assertEquals(expected, actual) → assertExpectedEqualsActual(expected, actual)</li>
</ul>
</li>
</ul>
</li>
<li>指令(command)與查詢(query)分離<ul>
<li>if(attributeExists(“username”)) setAttribute(“username”, “unclebob”); // makesure attribute exist before set</li>
</ul>
</li>
<li>結構化程式設計準則<ul>
<li>每個函式的區塊都應該只有一個進入點和一個離開點(沒有break, continue, goto，只有一個return)</li>
<li>在函式夠短的情況下<strong>沒有必要</strong></li>
</ul>
</li>
</ul>
<h3 id="(3)註解">(3)註解</h3><ul>
<li>註解是輔助程式碼來表達意圖的工具<ul>
<li>有註解代表程式碼不夠易懂</li>
<li>愈少愈好</li>
</ul>
</li>
<li>註解通常缺少維護<ul>
<li>許多過時的註解</li>
</ul>
</li>
<li>必要的註解 <ul>
<li>版權宣告</li>
<li>資訊型<ul>
<li>舉例示範</li>
</ul>
</li>
<li>解釋意圖<ul>
<li>對某個問題的解決方法</li>
<li>演算法</li>
</ul>
</li>
<li>解釋自己無法修改的程式碼(函式庫等)</li>
<li>警告<ul>
<li>不希望被修改的地方</li>
</ul>
</li>
<li>TODO</li>
</ul>
</li>
<li>糟糕的註解<ul>
<li>浪費時間看，最後被忽略<ul>
<li>沒有提供更多資訊<ul>
<li>printBoard() // print board</li>
</ul>
</li>
<li>過多的資訊</li>
<li>被強迫寫的</li>
</ul>
</li>
<li>已被版本控制軟體取代的功能<ul>
<li>版本變動記錄</li>
<li>被註解的程式碼</li>
</ul>
</li>
<li>過度使用標誌：一堆斜線(示範：// comment //////////////////)</li>
</ul>
</li>
</ul>
<h3 id="(4)排版">(4)排版</h3><ul>
<li>偏好小檔案(200-500行)</li>
<li>報紙型編排：先出現標題(高階概念、演算法)，再來是內容(函式、細節)<ul>
<li>最重要的概念先出現，用最少的資訊來表達，再來才是實作細節</li>
</ul>
</li>
<li>垂直距離：類似的概念應盡可能靠近<ul>
<li>空白行用來分隔思緒，概念(類似文章分段)<ul>
<li>做相似的工作的函式愈近愈好</li>
</ul>
</li>
<li>變數宣告：靠近變數被使用的地方<ul>
<li>若函式夠短，可在函式最上方宣告</li>
</ul>
</li>
<li>迴圈的控制變數：在迴圈內宣告<ul>
<li>for(int i = 0, …)</li>
</ul>
</li>
<li>class內的函數<ul>
<li>java放在class的最上方</li>
<li>C++ 按照 <a href="https://groups.yahoo.com/neo/groups/extremeprogramming/conversations/topics/2405" target="_blank" rel="external">scissors rule(剪刀準則)</a></li>
</ul>
</li>
<li>降層準則<ul>
<li>函式後面為其呼叫的函式，易於閱讀</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="(5)物件及資料結構">(5)物件及資料結構</h3><p>1.物件  </p>
<ul>
<li>私有變數和公用函式</li>
<li>將實現的過程隱藏(抽象化)</li>
<li>用抽象詞彙表達資料<ul>
<li><code>getGallonsOfGasoline()</code> → <code>getPercentFuelRemaining()</code>    </li>
</ul>
</li>
<li>常數宣告：放在適當的層級<ul>
<li>getPageNameOrDefault(request, “FrontPage”) //default is “FrongPage”</li>
<li>將預設的常數放在呼叫的層級</li>
</ul>
</li>
<li><strong>要讓每件事物都是一個物件是一個神話</strong></li>
</ul>
<p>2.資料結構  </p>
<ul>
<li>曝露資料(public)，沒有顯著的函式</li>
<li>為資料結構設getter和setter是多此一舉</li>
</ul>
<p>互補性     </p>
<ul>
<li>物件：新資料型態的彈性 ↔ 資料結構：新行為的彈性<ul>
<li>資料結構容易添加函式，而不用更改現有的資料結構</li>
<li>物件容易添加新的類別，而不用更改現有的函式</li>
</ul>
</li>
<li>混合體只會得到兩者的缺點</li>
</ul>
<p><a href="http://zh.wikipedia.org/wiki/%E5%BE%97%E5%A2%A8%E5%BF%92%E8%80%B3%E5%AE%9A%E5%BE%8B" target="_blank" rel="external">The law of Demeter</a>  </p>
<ul>
<li>模組不該知道關於它所操縱<strong>物件</strong>的內部運作</li>
<li>違反原則: 火車連結<ul>
<li><code>String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath()</code></li>
<li>改進(仍然知道底層操作)：<code>Options opts = ctxt.getOptions();</code>, <code>File scratchDir = opts.getScratchDir();</code>, <code>String outputDir = scratchDir.getAbsolutePath();</code></li>
<li>若 ctxt, options 是資料結構，則以下可行<ul>
<li><code>outputDir = ctxt.options.scratchDir.absolutePath</code></li>
</ul>
</li>
<li>若是物件，則我們應該要告訴 ctxt 去做 <strong>某件事情</strong><ul>
<li>和其他程式碼合併 : <code>BufferedOutputStream bos = ctxt.createScratchFileStream(classFileName)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="(6)錯誤處理">(6)錯誤處理</h3><ul>
<li>定義正常的流程<ul>
<li>使用<a href="http://martinfowler.com/eaaCatalog/specialCase.html" target="_blank" rel="external">特殊情況物件(special case pattern)</a>替代if()檢查<ul>
<li>將特殊情況包在特殊情況物件</li>
</ul>
</li>
</ul>
</li>
<li>使用 例外處理(try-catch-finally) 取代回傳error code<ul>
<li>例外處理是「一件事」 <ul>
<li>error code 必須在呼叫結束之後立即檢查錯誤</li>
<li>提取try和catch的內容，成為新函式</li>
</ul>
</li>
</ul>
</li>
<li>不要傳遞NULL<ul>
<li>要檢查值是不是NULL，很麻煩<ul>
<li>所有程式都不傳NULL → 所有函式都不用檢查</li>
</ul>
</li>
<li>解決<ul>
<li>回傳特殊情況物件<ul>
<li>例：找不到時，回傳空list</li>
</ul>
</li>
<li>使用例外處理</li>
</ul>
</li>
</ul>
</li>
<li>Java：<a href="http://teddy-chen-tw.blogspot.tw/2011/05/checked-or-unchecked-exceptions-1.html" target="_blank" rel="external">使用不檢查型例外：</a>, <a href="http://www.slideshare.net/teddysoft/javacheckedunchecked-exceptions" target="_blank" rel="external">(檢查和不檢查型例外)</a>, 因為其破壞開放閉合原則，修改低階函式時也需要修改高階函式</li>
</ul>
<h3 id="(7)邊界">(7)邊界</h3><p>使用第三方API時</p>
<ul>
<li>學習性測試<ul>
<li>寫一些測試程式來了解第三方軟體</li>
<li>第三方軟體改版後也能用來確定行為是否改變</li>
</ul>
</li>
<li>包裹第三方API<ul>
<li><code>public void open() { try{innerPort.open();} ... }</code></li>
<li>好處<ul>
<li>掌握控制程式的權利</li>
<li>在API未知的情況可以先寫出Fake API來測試</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="(8)單元測試">(8)單元測試</h3><p> 有了測試程式(和版本控制系統)就不會害怕修改程式！</p>
<p><a href="http://gliyao.logdown.com/posts/2014/01/18/software-talk-about-test-driven-development-test-driven-development-i" target="_blank" rel="external">測試驅動開發(TDD)</a></p>
<ol>
<li>只寫剛好無法通過的單元測試</li>
<li>只寫剛好能通過測試的程式</li>
</ol>
<ul>
<li>測試的程式碼也需要整潔<ul>
<li>最重要的是可讀性，效率是其次</li>
</ul>
</li>
<li>建造-操作-檢查（BUILD-OPERATE-CHECK）<ul>
<li>產生數據，操作之，再檢查正確性</li>
<li>GIVEN-WHEN-THEN<ul>
<li>Given: 前提、環境</li>
<li>When: 發生事情</li>
<li>Then: 預期結果</li>
</ul>
</li>
</ul>
</li>
<li>一個測試只用一個assert</li>
</ul>
<p>F.I.R.S.T. 法則    </p>
<ul>
<li>Fast：快速</li>
<li>Independent：可個別獨立執行</li>
<li>Repeatable：可在任何環境重複執行</li>
<li>Self-Validating：輸出bool值，而不是記錄檔</li>
<li>Timely：先寫測試再實作</li>
</ul>
<h3 id="(9)類別">(9)類別</h3><p>計算職責的數量：單一職責原則  </p>
<ul>
<li>每個class只能有一個修改的理由</li>
<li>凝聚性：方法內使用愈多變數代表這個方法更屬於這個類別</li>
<li>保持凝聚性就會產生許多小類別</li>
</ul>
<p>開放閉合原則：類別是可擴充，但不可修改的<br><a href="http://yupingnote.blogspot.tw/2013/12/dip.html" target="_blank" rel="external">相依性反轉原則 (DIP, Dependency Inversion Principle)</a></p>
<ul>
<li>類別應該相依於抽象概念而非具體細節</li>
<li>細節應該依賴抽象，抽象不該依賴細節</li>
</ul>
<p>一種解法：<br>將public interface method重構到 extend class</p>
<h3 id="(10)系統">(10)系統</h3><p>如同建造城市，某些人負責整體規劃，其它人專注在細節執行。<br>進行抽象化和模組化</p>
<p>將所有關注的事分離開來<br>e.g. 延遲初始(Lazy Initialization)：物件的建立會延後到第一次使用為止<br>但是每個物件都要做的話，產生很多重複       </p>
<ul>
<li><strong>將建造和使用分離</strong><ul>
<li>main建造物件，並將物件傳送至應用程式。應用程式只需要使用</li>
<li>有時候應用程式要決定何時產生物件<ul>
<li>抽象工廠<ul>
<li>main開工廠，集中生產，並由應用程式呼叫</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>相依性注入<a href="http://huan-lin.blogspot.com/2011/10/dependency-injection-1.html" target="_blank" rel="external">(1)</a><a href="http://stackoverflow.com/questions/130794/what-is-dependency-injection" target="_blank" rel="external">(2)</a>   </p>
<ul>
<li>控管反轉<ul>
<li>將某件事的第二個職責移到其它專注於該職責的物件裡</li>
</ul>
</li>
</ul>
<p>擴大  </p>
<ul>
<li><a href="https://zh.wikipedia.org/zh-tw/%E5%8D%81%E5%A4%A7%E5%BB%BA%E8%A8%AD#.E8.A9.95.E5.83.B9" target="_blank" rel="external">誰有辦法預期小鎮的成長，而在鎮上先鋪好六線道高速公路？</a><ul>
<li>讓系統一開始就做對，是一個神話</li>
</ul>
</li>
<li>AOP<a href="https://zh.wikipedia.org/wiki/面向侧面的程序设计" target="_blank" rel="external">(1)</a><a href="www.javaworld.com.tw/jute/post/view?bid=43&amp;id=145561&amp;sty=1&amp;tpg=1&amp;age=0">(2)</a><ul>
<li>剖面(aspect)<ul>
<li>系統中哪些點的行為，需要一起修改，以支援某個關注點</li>
<li>如日誌記錄(log)、使用相同資料庫 </li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="剖面範例">剖面範例</h4><ol>
<li><a href="http://openhome.cc/Gossip/SpringGossip/FromProxyToAOP.html" target="_blank" rel="external">Java代理機制</a><ol>
<li>代理可以呼叫被代理物件的函式，也可以進行剖面的行為</li>
</ol>
</li>
<li>Java AOP框架<ol>
<li>Spring AOP</li>
<li>JBoss AOP</li>
</ol>
</li>
<li><a href="http://blog.csdn.net/zl3450341/article/details/7673938" target="_blank" rel="external">AspectJ</a></li>
</ol>
<blockquote>
<p>一個理想的架構，包含模組化的關注點，每個關注點都用一個普通物件實作。 不同領域之間利用最小侵入性的剖面工具整合。 這樣的架構就可以是測試驅動的(test-driven)，如同程式碼一樣。</p>
</blockquote>
<p>系統需要特定領域的語言(Domain-Specific Language), 讓領域專家可以把程式寫得像是散文的結構，而且領域概念和實作程式碼相似</p>
<h3 id="(11)羽化">(11)羽化</h3><p>這篇算是總集篇</p>
<p>簡單設計守則  </p>
<ol>
<li>執行完所有的測試</li>
<li>程式重構<ol>
<li>消除重複<ol>
<li><a href="http://www.dotblogs.com.tw/pin0513/archive/2010/10/03/18072.aspx" target="_blank" rel="external">樣版方法(Template Method)</a></li>
</ol>
</li>
<li>具表達力<ol>
<li>持續嘗試<ol>
<li>用心照顧你的程式</li>
</ol>
</li>
</ol>
</li>
<li>最小化類別及方法數量</li>
<li>重要性 1 &gt; 2 &gt; 3</li>
</ol>
</li>
</ol>
<h3 id="(12)平行化">(12)平行化</h3><blockquote>
<p>物件是處理過程的抽象化，執行緒是排程的抽象化</p>
</blockquote>
<p>將「做什麼」和「何時做」分解開來。</p>
<p>缺點  </p>
<ul>
<li>需要修改程式碼/架構</li>
<li>速度不一定變快(有overhead)</li>
<li>很難寫正確<ul>
<li>很難發覺bug(不容易重複出現)</li>
</ul>
</li>
</ul>
<p>建議  </p>
<ul>
<li>將平行化的程式碼和其他程式碼分開</li>
<li>限制資料的視野<ul>
<li>mutex lock(c), synchronized(java)</li>
<li>避免在一個共享物件上使用多個方法</li>
</ul>
</li>
<li>使用資料的複本<ul>
<li>由一個執行緒負責合併結果</li>
</ul>
</li>
<li>每個執行緒盡可能獨立運行<ul>
<li>不共用資料</li>
</ul>
</li>
<li>正確的關閉程式<ul>
<li>防止deadlock</li>
</ul>
</li>
<li>測試<ul>
<li>偽造/產生失敗以測試</li>
<li>在不同的平台測試</li>
<li>執行比處理器數量還多的執行緒</li>
<li>調整參數(執行緒數量、重複執行次數)</li>
<li><a href="http://www.ibm.com/developerworks/cn/java/j-contest.html" target="_blank" rel="external">用IBM contest找BUG</a><ul>
<li>不一定會順順序執行</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>實作  </p>
<ul>
<li>ReentrantLock</li>
<li>Semaphore</li>
<li>CountDownLatch</li>
</ul>
<p>模型  </p>
<ul>
<li>生產-消費</li>
<li>讀取-寫入</li>
<li>哲學家用餐</li>
</ul>
<h2 id="進階閱讀">進階閱讀</h2><p><a href="https://msdn.microsoft.com/zh-tw/library/dn387568.aspx" target="_blank" rel="external">30天快速上手 TDD</a><br><a href="https://www.gitbook.com/book/lee-w/clean-code/details" target="_blank" rel="external">cleancode筆記</a><br><a href="http://www.tenlong.com.tw/items/9861541489?item_id=25936" target="_blank" rel="external">敏捷軟體開發：原則、樣式及實務</a></p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/NLP/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一頁</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/economics/" class="alignright next">下一頁<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2015-02-26 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/筆記/">筆記<span>7</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/OOP/">OOP<span>1</span></a></li> <li><a href="/tags/程式/">程式<span>2</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2015 HCL
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>

<script type="text/javascript">
var disqus_shortname = 'githubforqwerty';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<!--mathjax-->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>      


<!--leancloud page counter-->
<script>
function addCount (Counter) {
        var title = $("page-header").context.title.split('|')[0].trim();
	var url = "/" + $('.mytitle').context.URL.split("/")[3] + "/";
        var query=new AV.Query(Counter);
        //use url as unique idnetfication
        query.equalTo("url",url);
        query.find({
            success: function(results){
                if(results.length>0)
                {
                    var counter=results[0];
                    counter.fetchWhenSave(true); //get recent result
                    counter.increment("time");
                    counter.save();
                }
                else
                {
                    var newcounter=new Counter();
                    newcounter.set("title",title);
                    newcounter.set("url",url);
                    newcounter.set("time",1);
                    newcounter.save(null,{
                        success: function(newcounter){
                        //alert('New object created');
                        },
                        error: function(newcounter,error){
                        alert('Failed to create');
                        }
                        });
                }
            },
            error: function(error){
                //find null is not a error
                alert('Error:'+error.code+" "+error.message);
            }
        });
}
$(function(){
        var Counter=AV.Object.extend("Counter");
        //only increse visit counting when intering a page
	var titleName = $('h1')[0].textContent.trim()
        if ($('.mytitle').context.URL.split("/")[2] != "localhost:4000" && $('title').length == 1 && titleName != "QWERTY" && titleName != "Categories" && titleName != "Tags" && titleName != "彙整")
           addCount(Counter);
        var query=new AV.Query(Counter);
        query.descending("time");
        // the sum of popular posts
        query.limit(10); 
        query.find({
            success: function(results){
				
                    for(var i=0;i<results.length;i++)    
                    {
						//alert(results[i]);
                        var counter=results[i];
                        title=counter.get("title");
                        url=counter.get("url");
                        time=counter.get("time");
                        // add to the popularlist widget
                        showcontent=title+" ("+time+")";
                        //notice the "" in href
                        $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                    }
                },
            error: function(error){
                alert("Error:"+error.code+" "+error.message);
            }
            }
        )
        });
</script>

</body>
   </html>
